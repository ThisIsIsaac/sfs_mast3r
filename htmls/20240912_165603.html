<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>3D Reconstruction Results</title>
  <!-- Include model-viewer -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    /* Styles for the layout */
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .controls {
      margin-bottom: 20px;
    }
    .controls label {
      margin-right: 10px;
    }
    .controls input {
      margin-right: 20px;
    }
    #items-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
    }
    .item {
      width: 48%;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      padding: 10px;
    }
    .images {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .images img {
      width: 48%;
      height: auto;
    }
    .model-viewer-container {
      margin-bottom: 10px;
    }
    .score {
      font-weight: bold;
      text-align: right;
    }
    .pagination {
      text-align: center;
      margin-top: 20px;
    }
    .pagination button {
      margin: 0 10px;
    }
  </style>
</head>
<body>

  <!-- Controls -->
  <div class="controls">
    <label for="itemsPerPage">Items per page:</label>
    <input type="number" id="itemsPerPage" min="1" value="5">

    <label for="modelSize">Model size (%):</label>
    <input type="number" id="modelSize" min="10" max="100" value="50">

    <label for="minScore">Min score:</label>
    <input type="number" id="minScore" value="0">

    <label for="maxScore">Max score:</label>
    <input type="number" id="maxScore" value="100">

    <button id="applyFilters">Apply Filters</button>
  </div>

  <!-- Items Container -->
  <div id="items-container">
    <!-- Items will be dynamically inserted here -->
  </div>

  <!-- Pagination -->
  <div class="pagination">
    <button id="prevPage">Previous</button>
    <span id="currentPage">Page 1</span>
    <button id="nextPage">Next</button>
  </div>

  <!-- JavaScript -->
  <script>
    // Sample data array
    const data = [
      const data = [
  {
    "id": 0,
    "image1": "/viscam/u/iamisaac/mast3r/assets/NLE_tower/1AD85EF5-B651-4291-A5C0-7BDB7D966384-83120-000041DADF639E09.jpg",
    "image2": "/viscam/u/iamisaac/mast3r/assets/NLE_tower/01D90321-69C8-439F-B0B0-E87E7634741C-83120-000041DAE419D7AE.jpg",
    "model": "/viscam/projects/sfs/mast3r_outputs/test2/tmpx9f84b4v_scene.glb",
    "score": 0.6350054740905762
  }
];
      {
        id: 1,
        image1: 'path/to/image1a.jpg',
        image2: 'path/to/image1b.jpg',
        model: 'path/to/model1.glb',
        score: 85
      },
      {
        id: 2,
        image1: 'path/to/image2a.jpg',
        image2: 'path/to/image2b.jpg',
        model: 'path/to/model2.glb',
        score: 90
      },
      // Add more items as needed
    ];

    // Global variables
    let currentPage = 1;
    let itemsPerPage = 5;
    let modelSize = 50;
    let minScore = 0;
    let maxScore = 100;
    let filteredData = [];

    // Function to apply filters
    function applyFilters() {
      itemsPerPage = parseInt(document.getElementById('itemsPerPage').value);
      modelSize = parseInt(document.getElementById('modelSize').value);
      minScore = parseFloat(document.getElementById('minScore').value);
      maxScore = parseFloat(document.getElementById('maxScore').value);

      // Filter data based on score
      filteredData = data.filter(item => item.score >= minScore && item.score <= maxScore);

      currentPage = 1;
      displayItems();
    }

    // Function to display items
    function displayItems() {
      const container = document.getElementById('items-container');
      container.innerHTML = '';

      const startIndex = (currentPage - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const itemsToDisplay = filteredData.slice(startIndex, endIndex);

      itemsToDisplay.forEach(item => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'item';

        // Images
        const imagesDiv = document.createElement('div');
        imagesDiv.className = 'images';

        const img1 = document.createElement('img');
        img1.src = item.image1;
        const img2 = document.createElement('img');
        img2.src = item.image2;

        imagesDiv.appendChild(img1);
        imagesDiv.appendChild(img2);

        itemDiv.appendChild(imagesDiv);

        // 3D model
        const modelDiv = document.createElement('div');
        modelDiv.className = 'model-viewer-container';
        modelDiv.style.width = modelSize + '%';
        modelDiv.style.margin = '0 auto';

        const modelViewer = document.createElement('model-viewer');
        modelViewer.src = item.model;
        modelViewer.alt = '3D model';
        modelViewer.style.width = '100%';
        modelViewer.style.height = '500px';
        modelViewer.setAttribute('camera-controls', '');
        modelViewer.setAttribute('touch-action', 'pan-y');

        modelDiv.appendChild(modelViewer);
        itemDiv.appendChild(modelDiv);

        // Score
        const scoreDiv = document.createElement('div');
        scoreDiv.className = 'score';
        scoreDiv.textContent = 'Score: ' + item.score;
        itemDiv.appendChild(scoreDiv);

        container.appendChild(itemDiv);
      });

      document.getElementById('currentPage').textContent = 'Page ' + currentPage;
    }

    // Event listeners
    document.getElementById('applyFilters').addEventListener('click', applyFilters);

    document.getElementById('prevPage').addEventListener('click', function() {
      if (currentPage > 1) {
        currentPage--;
        displayItems();
      }
    });

    document.getElementById('nextPage').addEventListener('click', function() {
      const totalPages = Math.ceil(filteredData.length / itemsPerPage);
      if (currentPage < totalPages) {
        currentPage++;
        displayItems();
      }
    });

    // Initial load
    applyFilters();

  </script>

</body>
</html>